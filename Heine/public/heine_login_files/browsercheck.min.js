/* Credits go to: http://www.quirksmode.org/js/detect.html */
/* The version detect doesn't work in Safari and OmniWeb because these browsers don't include comprehensible version information in their identity string. */
var redPipeAndNode='HV_ViewCatalog-ShowBrowserOld';var prefix_str=[];prefix_str['HeineDe']='/is-bin/INTERSHOP.enfinity/WFS/Heine-HeineDe-Site/de_DE/-/EUR';prefix_str['HeineAt']='/is-bin/INTERSHOP.enfinity/WFS/Heine-HeineAt-Site/de_AT/-/EUR';prefix_str['HeineCh']='/is-bin/INTERSHOP.enfinity/WFS/Heine-HeineCh-Site/de_CH/-/CHF';prefix_str['HeineNL']='/is-bin/INTERSHOP.enfinity/WFS/Heine-HeineNL-Site/nl_NL/-/EUR';var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";},searchString:function(data){try{for(var i=0;i<data.length;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!=-1)
return data[i].identity;}
else if(dataProp)
return data[i].identity;}}catch(ex){}},searchVersion:function(dataString){try{var index=dataString.indexOf(this.versionSearchString);if(index==-1)return;return parseFloat(dataString.substring(index+this.versionSearchString.length+1));}catch(ex){return;}},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};
function browsercheck(){
	if(window.location.pathname.indexOf(redPipeAndNode)==-1){
		try{if(window.location.pathname.indexOf('SignOff')>-1)return;
		var redirectMe=false;
		BrowserDetect.init();

		if(BrowserDetect.browser=='Firefox'&&BrowserDetect.version<3){
			redirectMe=true;
		}
		if(BrowserDetect.browser=='Explorer'&&BrowserDetect.version<7){
			redirectMe=true;

		}
		if (redirectMe) {
			var ii=-1;
			var t = document.cookie;
			if (t.indexOf("hobs=")>-1) ii=t.indexOf("hobs=")+5;

			var skipcheck=0;
			if (ii>-1 && t.length>=24) {
				t=t.substr(ii,1);
				var skipcheck = parseInt(t);
				if (!isNaN(skipcheck) && skipcheck==1) return;
			}
			var bcWebRoot=null;
			var redirectUrl = null;

			if(window.location.pathname.search(/HeineDe$/)>-1) bcWebRoot=prefix_str['HeineDe'];
			else if(window.location.pathname.search(/HeineAt$/)>-1) bcWebRoot=prefix_str['HeineAt'];
			else if(window.location.pathname.search(/HeineCh$/)>-1) bcWebRoot=prefix_str['HeineCh'];
			else if(window.location.pathname.search(/HeineNL$/)>-1) bcWebRoot=prefix_str['HeineNL'];
			else bcWebRoot=window.location.pathname.substring(0,window.location.pathname.lastIndexOf('/'));
			// letzter fallback, falls keine intershop-url
			if (bcWebRoot.indexOf("is-bin")==-1) {
				if (window.location.host.indexOf(".de")>0) bcWebRoot=prefix_str['HeineDe'];
				else if (window.location.host.indexOf(".at")>0) bcWebRoot=prefix_str['HeineAt'];
				else if (window.location.host.indexOf(".ch")>0) bcWebRoot=prefix_str['HeineCh'];
				else if (window.location.host.indexOf(".nl")>0) bcWebRoot=prefix_str['HeineNL'];
			}
			redirectUrl=bcWebRoot+'/'+redPipeAndNode;
			if (window.location.host.indexOf('pc')==0) {
				alert('BROWSERCHECK $Revision: 1.8 $ - $Author: hkonitzer $\n\nUserAgent:\n'+BrowserDetect.browser+'\n\nskipcheck (ii):'+skipcheck+' ('+ii+')\n\nbcWebRoot:\n'+bcWebRoot+'\n\nredPipeAndNode:\n'+redPipeAndNode+'\n\nURL:\n'+bcWebRoot+'/'+redPipeAndNode)
			}
			if (redirectUrl!=null) window.location.href=redirectUrl;

		}
		}catch(ex){if (typeof console=='object') console.log(ex);}
	}
}
browsercheck();